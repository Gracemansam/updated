"use strict";(self.webpackChunkcore_module=self.webpackChunkcore_module||[]).push([[873],{9873:(e,s,t)=>{var a=t(318),n=t.n(a),r=t(5338),l=t(1821),i=t(1468),o=t(4365),c=t(495),d=t(8539);const x=(0,d.createSlice)({name:"auth",initialState:{isAuthenticated:!1,user:null,loading:!1,error:null},reducers:{loginStart:e=>{e.loading=!0},loginSuccess:(e,s)=>{e.isAuthenticated=!0,e.user=s.payload,e.loading=!1,e.error=null},loginFailed:(e,s)=>{e.loading=!1,e.error=s.payload},logout:e=>{e.isAuthenticated=!1,e.user=null}}}),{loginStart:u,loginSuccess:h,loginFailed:m,logout:p}=x.actions,g=x.reducer,j=(0,d.configureStore)({reducer:{auth:g}}),b=(0,t(7994).A)({palette:{primary:{main:"#1976d2"},secondary:{main:"#dc004e"}}});var y=t(4848);const f=()=>{const[e,s]=(0,a.useState)({username:"",password:""}),t=(0,i.wA)(),n=(0,l.useNavigate)(),{error:r,loading:o}=(0,i.d4)((e=>e.auth));return(0,y.jsx)(c.Container,{maxWidth:"xs",sx:{minHeight:"100vh",display:"flex",alignItems:"center"},children:(0,y.jsxs)(c.Paper,{elevation:3,sx:{p:4,display:"flex",flexDirection:"column",alignItems:"center",width:"100%",mt:-8},children:[(0,y.jsx)(c.Typography,{component:"h1",variant:"h5",sx:{mb:3,fontWeight:"bold",color:"#1a237e"},children:"Login"}),r&&(0,y.jsx)(c.Alert,{severity:"error",sx:{mb:2,width:"100%"},children:r}),(0,y.jsxs)(c.Box,{component:"form",onSubmit:async s=>{s.preventDefault(),t(u());try{if(await new Promise((e=>setTimeout(e,1e3))),"admin"!==e.username||"password"!==e.password)throw new Error("Invalid credentials");t(h({username:e.username,role:"admin"})),n("/dashboard")}catch(e){t(m(e.message))}},sx:{width:"100%"},children:[(0,y.jsx)(c.TextField,{margin:"normal",required:!0,fullWidth:!0,label:"Username",autoFocus:!0,variant:"outlined",value:e.username,onChange:t=>s({...e,username:t.target.value}),sx:{mb:2}}),(0,y.jsx)(c.TextField,{margin:"normal",required:!0,fullWidth:!0,label:"Password",type:"password",variant:"outlined",value:e.password,onChange:t=>s({...e,password:t.target.value}),sx:{mb:3}}),(0,y.jsx)(c.Button,{type:"submit",fullWidth:!0,variant:"contained",disabled:o,sx:{py:1.5,bgcolor:"#1a237e","&:hover":{bgcolor:"#000051"}},children:o?"Logging in...":"Login"})]})]})})};var v=t(1117),w=t(9634),N=t(4172),A=t(2666),C=t(6119),S=t(5764),T=t(5213);const k={dashboard:{text:"Dashboard",icon:(0,y.jsx)(v.A,{}),path:"/dashboard",baseRoute:"dashboard"},patients:{text:"Patients",icon:(0,y.jsx)(w.A,{}),path:"/patients",baseRoute:"patients"},clinic:{text:"Triage",icon:(0,y.jsx)(N.A,{}),path:"/clinic",baseRoute:"clinic"},pharmacy:{text:"Pharmacy",icon:(0,y.jsx)(A.A,{}),path:"/pharmacy",baseRoute:"pharmacy"},reports:{text:"Reports",icon:(0,y.jsx)(C.A,{}),path:"/reports",baseRoute:"reports"},settings:{text:"Plugin Config",icon:(0,y.jsx)(S.A,{}),path:"/plugin-config",baseRoute:"plugin-config"}},I=()=>{const e=(0,l.useNavigate)(),s=(0,l.useLocation)(),t=(0,i.wA)(),a=(e=>{const s=e.split("/")[1];return Object.values(k).find((e=>e.baseRoute===s))?.baseRoute})(s.pathname);return(0,y.jsxs)(c.Drawer,{variant:"permanent",sx:{width:240,flexShrink:0,"& .MuiDrawer-paper":{width:240,boxSizing:"border-box",backgroundColor:"#1a237e",color:"white"}},children:[(0,y.jsx)(c.Box,{sx:{p:3},children:(0,y.jsx)(c.Typography,{variant:"h5",sx:{fontWeight:"bold"},children:"LAMIS"})}),(0,y.jsx)(c.Divider,{sx:{backgroundColor:"rgba(255,255,255,0.12)"}}),(0,y.jsx)(c.List,{sx:{flexGrow:1},children:Object.values(k).map((s=>(0,y.jsxs)(c.ListItem,{button:!0,onClick:()=>e(s.path),sx:{my:.5,backgroundColor:a===s.baseRoute?"rgba(255,255,255,0.08)":"transparent","&:hover":{backgroundColor:"rgba(255,255,255,0.12)"}},children:[(0,y.jsx)(c.ListItemIcon,{sx:{color:"white"},children:s.icon}),(0,y.jsx)(c.ListItemText,{primary:s.text})]},s.text)))}),(0,y.jsx)(c.Divider,{sx:{backgroundColor:"rgba(255,255,255,0.12)"}}),(0,y.jsx)(c.List,{children:(0,y.jsxs)(c.ListItem,{button:!0,onClick:()=>{t(p()),e("/login")},sx:{"&:hover":{backgroundColor:"rgba(255,255,255,0.12)"}},children:[(0,y.jsx)(c.ListItemIcon,{sx:{color:"white"},children:(0,y.jsx)(T.A,{})}),(0,y.jsx)(c.ListItemText,{primary:"Logout"})]})})]})},R=()=>(0,y.jsxs)(c.Box,{sx:{p:3},children:[(0,y.jsx)(c.Typography,{variant:"h4",sx:{mb:4,fontWeight:"bold"},children:"Dashboard"}),(0,y.jsx)(c.Grid,{container:!0,spacing:3,children:(0,y.jsx)(c.Grid,{item:!0,xs:12,md:4,children:(0,y.jsxs)(c.Paper,{sx:{p:3,display:"flex",flexDirection:"column",alignItems:"center",bgcolor:"#e3f2fd",borderRadius:2},children:[(0,y.jsx)(w.A,{sx:{fontSize:40,color:"#1976d2",mb:1}}),(0,y.jsx)(c.Typography,{variant:"h6",sx:{mb:1},children:"Total Patients"}),(0,y.jsx)(c.Typography,{variant:"h4",children:"120"})]})})})]});var P=t(9682),B=t(7809),L=t(669),z=t(7110),D=t(3304);const F=e=>{let{onRefresh:s}=e;const[t,n]=(0,a.useState)([]),[r,l]=(0,a.useState)(!0),[i,o]=(0,a.useState)({open:!1,message:"",type:"success"}),d=async()=>{try{const e=await fetch("http://localhost:8090/api/v1/module/list"),s=await e.json();n(Array.isArray(s.data)?s.data:[])}catch(e){console.error("Error fetching plugins:",e),n([]),o({open:!0,message:"Failed to fetch plugins",type:"error"})}finally{l(!1)}};return(0,a.useEffect)((()=>{d()}),[]),r?(0,y.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,y.jsx)(c.CircularProgress,{})}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"mb-6",children:(0,y.jsx)(c.Typography,{variant:"h6",className:"text-gray-800 font-semibold mb-2",children:"Installed Plugins"})}),Array.isArray(t)&&0!==t.length?(0,y.jsx)(c.Grid,{container:!0,spacing:3,children:t.map((e=>(0,y.jsx)(c.Grid,{item:!0,xs:12,sm:6,md:4,children:(0,y.jsx)(c.Card,{className:"h-full",children:(0,y.jsxs)("div",{className:"p-6 flex flex-col h-full",children:[(0,y.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,y.jsxs)("div",{className:"flex items-center",children:[(0,y.jsx)("div",{className:"bg-blue-50 p-3 rounded-lg mr-3",children:(0,y.jsx)(D.A,{sx:{fontSize:24},className:"text-blue-500"})}),(0,y.jsxs)("div",{children:[(0,y.jsx)(c.Typography,{className:"font-medium text-gray-900 line-clamp-1",children:e?.moduleName||"Unknown Plugin"}),(0,y.jsxs)(c.Typography,{variant:"caption",className:"text-gray-500",children:["v",e?.version||"0.0.0"]})]})]}),(0,y.jsx)("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-medium "+("STARTED"===e?.state?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e?.state||"UNKNOWN"})]}),(0,y.jsxs)("div",{className:"flex items-center justify-between mt-auto pt-4 border-t",children:[(0,y.jsx)("div",{className:"flex items-center space-x-2",children:(0,y.jsxs)(c.Typography,{variant:"caption",className:"text-gray-500",children:["ID: ",e?.moduleId||"N/A"]})}),(0,y.jsx)(c.Button,{variant:"outlined",color:"error",size:"small",startIcon:(0,y.jsx)(z.A,{}),onClick:()=>(async e=>{if(e)try{const t=await fetch(`http://localhost:8090/api/v1/module/${e}/uninstall`,{method:"GET"}),a=await t.json();if("200"!==a?.statusCode)throw new Error(a?.message||"Uninstall failed");o({open:!0,message:`Successfully uninstalled ${e}`,type:"success"}),await d(),s&&s()}catch(s){console.error("Uninstall error:",s),o({open:!0,message:`Failed to uninstall ${e}`,type:"error"})}})(e?.moduleId),className:"hover:bg-red-50",disabled:!e?.moduleId,children:"Uninstall"})]})]})})},e?.moduleId||Math.random())))}):(0,y.jsx)(c.Card,{className:"p-8 bg-white shadow-lg rounded-lg",children:(0,y.jsxs)("div",{className:"text-center",children:[(0,y.jsx)(D.A,{sx:{fontSize:48},className:"text-gray-300 mb-3"}),(0,y.jsx)(c.Typography,{className:"text-gray-500",children:"No plugins installed yet"})]})}),(0,y.jsx)(c.Snackbar,{open:i.open,autoHideDuration:6e3,onClose:()=>o((e=>({...e,open:!1}))),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,y.jsx)(c.Alert,{severity:i.type,onClose:()=>o((e=>({...e,open:!1}))),variant:"filled",children:i.message})})]})},U=()=>{const[e,s]=(0,a.useState)(!1),[t,n]=(0,a.useState)(!1),[r,l]=(0,a.useState)(null),[i,o]=(0,a.useState)({open:!1,message:"",type:"success"}),[d,x]=(0,a.useState)(0),u=(0,a.useRef)(null),h=()=>{t||(s(!1),l(null),u.current&&(u.current.value=""))};return(0,y.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,y.jsx)("div",{className:"mb-8",children:(0,y.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)(c.Typography,{variant:"h4",className:"text-gray-900 font-semibold mb-2",children:"Plugin Management"}),(0,y.jsx)(c.Typography,{variant:"body1",className:"text-gray-500",children:"Install and manage your plugins to extend functionality"})]}),(0,y.jsx)(c.Button,{variant:"contained",startIcon:(0,y.jsx)(P.A,{}),onClick:()=>s(!0),sx:{backgroundColor:"#3b82f6","&:hover":{backgroundColor:"#2563eb"},padding:"10px 24px",textTransform:"none",fontSize:"1rem"},children:"Add Plugin"})]})}),(0,y.jsx)(F,{onRefresh:()=>{x((e=>e+1))}},d),(0,y.jsx)(c.Modal,{open:e,onClose:h,"aria-labelledby":"upload-plugin-modal",children:(0,y.jsxs)(c.Box,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:480,bgcolor:"background.paper",borderRadius:3,boxShadow:24,p:4,outline:"none"},children:[(0,y.jsxs)("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)(c.Typography,{variant:"h6",className:"text-gray-900 font-medium mb-1",children:"Upload Plugin"}),(0,y.jsx)(c.Typography,{variant:"body2",className:"text-gray-500",children:"Add new functionality to your system"})]}),(0,y.jsx)(c.IconButton,{onClick:h,size:"small",className:"hover:bg-gray-100",disabled:t,children:(0,y.jsx)(B.A,{fontSize:"small"})})]}),(0,y.jsxs)("div",{className:"mb-6",children:[(0,y.jsx)("div",{onClick:()=>!t&&u.current?.click(),className:`flex flex-col items-center justify-center w-full h-56 border-2 border-dashed border-blue-300 rounded-xl ${!t&&"cursor-pointer hover:bg-blue-100"} bg-blue-50 transition-all`,children:(0,y.jsxs)("div",{className:"flex flex-col items-center justify-center p-6 text-center",children:[(0,y.jsx)(L.A,{sx:{fontSize:56},className:"text-blue-400 mb-4"}),(0,y.jsx)(c.Typography,{className:"mb-2 text-sm text-gray-700 font-medium",children:t?"Uploading...":"Click to select or drag and drop your plugin"}),(0,y.jsx)(c.Typography,{className:"text-xs text-gray-500",children:"Supported format: .jar"})]})}),(0,y.jsx)("input",{ref:u,type:"file",className:"hidden",onChange:e=>{const s=e.target?.files?.[0];s&&l(s)},accept:".jar",disabled:t})]}),r&&(0,y.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-xl flex items-center justify-between",children:[(0,y.jsxs)("div",{className:"flex items-center",children:[(0,y.jsx)(D.A,{className:"text-blue-500 mr-3"}),(0,y.jsxs)("div",{children:[(0,y.jsx)(c.Typography,{className:"text-sm font-medium text-gray-700 truncate max-w-[250px]",children:r.name}),(0,y.jsx)(c.Typography,{className:"text-xs text-gray-500",children:"Ready to install"})]})]}),!t&&(0,y.jsx)(c.IconButton,{size:"small",onClick:()=>{l(null),u.current&&(u.current.value="")},className:"text-gray-500 hover:bg-gray-200",children:(0,y.jsx)(B.A,{fontSize:"small"})})]}),t&&(0,y.jsxs)("div",{className:"flex justify-center items-center space-x-3 mb-6",children:[(0,y.jsx)(c.CircularProgress,{size:24,className:"text-blue-500"}),(0,y.jsx)(c.Typography,{className:"text-sm text-gray-600",children:"Installing plugin..."})]}),(0,y.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[(0,y.jsx)(c.Button,{variant:"outlined",onClick:h,disabled:t,className:"text-gray-700",sx:{textTransform:"none"},children:"Cancel"}),(0,y.jsx)(c.Button,{variant:"contained",disabled:t||!r,sx:{backgroundColor:"#3b82f6","&:hover":{backgroundColor:"#2563eb"},"&.Mui-disabled":{backgroundColor:"#e5e7eb"},textTransform:"none"},onClick:async()=>{if(!r)return;n(!0);const e=new FormData;e.append("file",r);try{const t=await fetch("http://localhost:8090/api/v1/module/upload",{method:"POST",body:e}),a=await t.json();if("200"!==a?.statusCode)throw new Error(a?.message||"Upload failed");o({open:!0,message:"Plugin uploaded successfully",type:"success"}),s(!1),x((e=>e+1))}catch(e){console.error("Upload error:",e),o({open:!0,message:"Failed to upload plugin",type:"error"})}finally{n(!1),l(null),u.current&&(u.current.value="")}},children:t?"Installing...":"Install Plugin"})]})]})}),(0,y.jsx)(c.Snackbar,{open:i.open,autoHideDuration:6e3,onClose:()=>o((e=>({...e,open:!1}))),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,y.jsx)(c.Alert,{severity:i.type,onClose:()=>o((e=>({...e,open:!1}))),variant:"filled",sx:{width:"100%"},children:i.message})})]})},E=n().lazy((()=>t.e(133).then(t.t.bind(t,5133,23)))),W=e=>{let{children:s}=e;return(0,i.d4)((e=>e.auth.isAuthenticated))?s:(0,y.jsx)(l.Navigate,{to:"/login"})},G=e=>{let{children:s}=e;return(0,i.d4)((e=>e.auth.isAuthenticated))?(0,y.jsxs)(c.Box,{sx:{display:"flex"},children:[(0,y.jsx)(I,{}),(0,y.jsx)(c.Box,{component:"main",sx:{flexGrow:1,p:3,marginLeft:"20px",minHeight:"100vh",bgcolor:"background.default"},children:s})]}):s},M=()=>(0,y.jsx)(G,{children:(0,y.jsx)(a.Suspense,{fallback:(0,y.jsx)("div",{children:"Loading..."}),children:(0,y.jsxs)(l.Routes,{children:[(0,y.jsx)(l.Route,{path:"/login",element:(0,y.jsx)(f,{})}),(0,y.jsx)(l.Route,{path:"/dashboard",element:(0,y.jsx)(W,{children:(0,y.jsx)(R,{})})}),(0,y.jsx)(l.Route,{path:"/plugin-config",element:(0,y.jsx)(W,{children:(0,y.jsx)(U,{})})}),(0,y.jsx)(l.Route,{path:"/patients/*",element:(0,y.jsx)(W,{children:(0,y.jsx)(E,{standalone:!1})})}),(0,y.jsx)(l.Route,{path:"/",element:(0,y.jsx)(l.Navigate,{to:"/dashboard"})})]})})}),O=function(){return(0,y.jsx)(i.Kq,{store:j,children:(0,y.jsxs)(o.A,{theme:b,children:[(0,y.jsx)(c.CssBaseline,{}),(0,y.jsx)(l.BrowserRouter,{children:(0,y.jsx)(M,{})})]})})};var H=t(5072),$=t.n(H),q=t(7825),K=t.n(q),_=t(7659),J=t.n(_),Q=t(5056),V=t.n(Q),X=t(540),Y=t.n(X),Z=t(1113),ee=t.n(Z),se=t(8972),te={};te.styleTagTransform=ee(),te.setAttributes=V(),te.insert=J().bind(null,"head"),te.domAPI=K(),te.insertStyleElement=Y(),$()(se.A,te),se.A&&se.A.locals&&se.A.locals,r.createRoot(document.getElementById("root")).render((0,y.jsx)(O,{}))},8972:(e,s,t)=>{t.d(s,{A:()=>i});var a=t(1601),n=t.n(a),r=t(6314),l=t.n(r)()(n());l.push([e.id,"@tailwind base;\n@tailwind components;\n@tailwind utilities;",""]);const i=l}}]);